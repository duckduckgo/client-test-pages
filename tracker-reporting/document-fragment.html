<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Tracker created via a document fragment</title>

  <script>
// eslint-disable-next-line no-unused-vars
function loadTracker () {
    /* Original code:

        appendMarkup: function appendMarkup(a) {
            if (this.trackingFooterEl) {
                var b = document.createDocumentFragment();
                var c = document.createElement('div');
                c.innerHTML = a;
                var d = _.map(c.getElementsByTagName('script'), _.identity);
                while (c.firstChild) {
                    b.appendChild(c.firstChild);
                }
                this.trackingFooterEl.appendChild(b);
                loadScripts(d, 0);
            }
        }

        */

    const targetElement = document.getElementById('target-div');

    const markup = "<img src='//facebook.com/tr?test=1'>";

    const fragment = document.createDocumentFragment();
    const div = document.createElement('div');
    div.innerHTML = markup;
    // var d = _.map(c.getElementsByTagName('script'), _.identity);
    while (div.firstChild) {
        fragment.appendChild(div.firstChild);
    }
    targetElement.appendChild(fragment);

    // loadScripts(d, 0);
}
  </script>

</head>
<body onload="loadTracker()">
<p><a href="../index.html">[Home]</a></p>

<p>Tracker created via a document fragment</p>

<div id="target-div">
</div>

</body>
</html>
